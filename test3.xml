<?xml version="1.0" encoding="UTF-8"?>
<vxml version = "2.1">

  <!-- 定义语言选择 -->
  <form id="languageSelection">
    <field name="language">
      <prompt>For English, press 1. Pour le français, appuyez sur 2.</prompt>
      <grammar xml:lang="en-US" root = "toprule" mode="dtmf">
        <rule id="toprule" scope = "public">
          <one-of>
            <item>1</item>
            <item>2</item>
          </one-of>
        </rule>
      </grammar>
      <filled>
        <if cond="language == '1'">
          <goto next="#seedAction_en"/>
        <else/>
          <goto next="#seedAction_fr"/>
        </if>
      </filled>
    </field>
  </form>

  <!-- 英语版的操作选择 -->
  <form id="seedAction_en" xml:lang="en-US">
    <field name="action">
      <prompt>Are you looking to buy seeds or sell seeds? Say 'buy' to buy seeds or 'sell' to sell seeds.</prompt>
      <grammar root="actionType">
        <rule id="actionType" scope="public">
          <one-of>
            <item>buy</item>
            <item>sell</item>
          </one-of>
        </rule>
      </grammar>
      <filled>
        <if cond="action == 'sell'">
          <goto next="#sellSeeds_en"/>
          <elseif cond="action == 'buy'"/>
          <goto next="#buySeeds_en"/>
        <else/>
          <prompt>I didn't understand that. You can say 'buy' or 'sell'.</prompt>
        </if>
      </filled>
    </field>
  </form>

   <!-- 购买种子的详细信息表单（英语） -->
   <form id="buySeeds_en" xml:lang="en-US">
   
    <field name="seedType">
      <prompt>What type of seeds would you like to buy? You can say 'rice', 'cotton', or 'sorghum'.</prompt>
      <grammar root="type">
        <rule id="type" scope="public">
          <one-of>
            <item>rice</item>
            <item>cotton</item>
            <item>sorghum</item>
          </one-of>
        </rule>
      </grammar>
      <filled>
        <assign name="seedType" expr="application.lastresult$.interpretation"/>
	<prompt>Selected seed type is <value expr="seedType"/>.</prompt>
	   
      </filled>
    </field>

    <field name="warehouseChoice">
        <block>
            <if cond="seedType=='rice'">
                <prompt>We have rice available in the following warehouses. Please choose one: Warehouse A with 500 units at $2 per unit, Warehouse B with 600 units at $1.8 per unit.</prompt>
            </if>
            <if cond="seedType=='cotton'">
                <prompt>We have cotton available in the following warehouses. Please choose one: Warehouse C with 300 units at $3 per unit, Warehouse D with 350 units at $2.5 per unit.</prompt>
            </if>
            <if cond="seedType=='sorghum'">
                <prompt>We have sorghum available in the following warehouses. Please choose one: Warehouse E with 400 units at $1.5 per unit, Warehouse F with 450 units at $1.3 per unit.</prompt>
            </if>
        </block>
        <grammar>
          <rule id="warehouse" scope="public">
            <one-of>
              <item>A</item>
              <item>B</item>
              <item>C</item>
              <item>D</item>
              <item>E</item>
              <item>F</item>
            </one-of>
          </rule>
        </grammar>
        <filled>
          <assign name="warehouseChoice" expr="application.lastresult$.interpretation"/>
          <prompt>Selected warehouse is <value expr="warehouseChoice"/>.</prompt>
        </filled>
      </field>
      
      <field name="quantity">
        <prompt>How many units would you like to buy from <value expr="warehouseChoice"/>?</prompt>
        <grammar xml:lang="en-US" root="$number" mode="voice">
          <rule id="$number" scope="public">
            <one-of>
              <item repeat="0-1">
                <ruleref uri="builtin:grammar/number"/>
              </item>
            </one-of>
          </rule>
        </grammar>
        <filled>
          <assign name="quantity" expr="application.lastresult$.interpretation"/>
          <prompt>You have chosen to buy <value expr="quantity"/> units.</prompt>
        </filled>
      </field>
</form>



  <!-- 出售种子的详细信息表单（英语） -->
  <form id="sellSeeds_en" xml:lang="en-US">
    <field name="seedType">
      <prompt>What type of seeds are you selling? You can say 'rice', 'cotton', or 'sorghum'.</prompt>
      <grammar root="type">
        <rule id="type" scope="public">
          <one-of>
            <item>rice</item>
            <item>cotton</item>
            <item>sorghum</item>
          </one-of>
        </rule>
      </grammar>
      <filled>
        <assign name="seedType" expr="application.lastresult$.interpretation"/>
	<prompt>Selected seed type is <value expr="seedType"/>.</prompt>
	   
      </filled>
    </field>
    <field name="quantity">
      <prompt>How many units are you selling?</prompt>
       <grammar xml:lang="en-US" root="$number" mode="voice">
        <rule id="$number" scope="public">
            <one-of>
                <item repeat="0-1">
                    <ruleref uri="builtin:grammar/number"/>
                </item>
            </one-of>
        </rule>
     </grammar>
     <filled>
      <assign name="quantity" expr="application.lastresult$.interpretation"/>
      <prompt>You have chosen to sell <value expr="quantity"/> units.</prompt>
    </filled>
    </field>
    <field name="price">
      <prompt>What is the price per unit?</prompt>
       <grammar xml:lang="en-US" root="$number" mode="voice">
        <rule id="$number" scope="public">
            <one-of>
                <item repeat="0-1">
                    <ruleref uri="builtin:grammar/number"/>
                </item>
            </one-of>
        </rule>
     </grammar>
     <filled>
      <assign name="quantity" expr="application.lastresult$.interpretation"/>
      <prompt>You have chosen to sell them by <value expr="price"/>.</prompt>
    </filled>
    </field>
    <filled>
      <prompt>Thank you. Your selling information has been recorded.</prompt>
    </filled>
  </form>
</vxml>
